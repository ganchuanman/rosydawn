## ADDED Requirements

### Requirement: ç½®ä¿¡åº¦é˜ˆå€¼åˆ¤æ–­

ç³»ç»Ÿ SHALL æ ¹æ®ç½®ä¿¡åº¦å†³å®šæ˜¯å¦éœ€è¦ç”¨æˆ·ç¡®è®¤ã€‚

#### Scenario: é«˜ç½®ä¿¡åº¦ç›´æŽ¥æ‰§è¡Œ
- **WHEN** AI è¿”å›žçš„ confidence >= 0.7
- **THEN** ç³»ç»Ÿç›´æŽ¥æ‰§è¡Œå¯¹åº”çš„ Workflow

#### Scenario: ä½Žç½®ä¿¡åº¦è¯·æ±‚ç¡®è®¤
- **WHEN** AI è¿”å›žçš„ confidence < 0.7
- **THEN** ç³»ç»Ÿæ˜¾ç¤º "æˆ‘ä¸å¤ªç¡®å®šæ‚¨çš„æ„å›¾ï¼Œæ‚¨æ˜¯æƒ³è¦æ‰§è¡Œ [X] å—ï¼Ÿ"
- **THEN** ç³»ç»Ÿç­‰å¾…ç”¨æˆ·ç¡®è®¤ï¼ˆæ˜¯/å¦ï¼‰

#### Scenario: ä½Žç½®ä¿¡åº¦ä¸”å¤šå€™é€‰
- **WHEN** AI è¿”å›žçš„ confidence < 0.7 ä¸”æœ‰å¤šä¸ªå¯èƒ½æ„å›¾
- **THEN** ç³»ç»Ÿæ˜¾ç¤ºå€™é€‰åˆ—è¡¨ä¾›ç”¨æˆ·é€‰æ‹©

### Requirement: AI å“åº”è§£æžå®¹é”™

ç³»ç»Ÿ SHALL å®¹é”™å¤„ç† AI è¿”å›žçš„éžæ ‡å‡† JSONã€‚

#### Scenario: æå– JSON ä»£ç å—
- **WHEN** AI è¿”å›žçš„å†…å®¹åŒ…å«åœ¨ ```json ``` ä»£ç å—ä¸­
- **THEN** ç³»ç»Ÿè‡ªåŠ¨æå–ä»£ç å—ä¸­çš„ JSON å†…å®¹

#### Scenario: å¤„ç† Markdown æ ¼å¼
- **WHEN** AI è¿”å›žçš„å†…å®¹åŒ…å«é¢å¤–çš„ Markdown æ ¼å¼
- **THEN** ç³»ç»Ÿæ¸…ç†æ ¼å¼å¹¶è§£æž JSON

#### Scenario: è§£æžå¤±è´¥é™çº§
- **WHEN** AI è¿”å›žçš„å†…å®¹æ— æ³•è§£æžä¸º JSON
- **THEN** ç³»ç»Ÿè®°å½•åŽŸå§‹å“åº”ç”¨äºŽè°ƒè¯•
- **THEN** ç³»ç»Ÿæç¤ºç”¨æˆ· "æ— æ³•ç†è§£ AI çš„å“åº”ï¼Œè¯·æ¢ä¸€ç§è¡¨è¾¾æ–¹å¼"

### Requirement: è¶…æ—¶æŽ§åˆ¶

ç³»ç»Ÿ SHALL é™åˆ¶ AI è°ƒç”¨çš„ç­‰å¾…æ—¶é—´ã€‚

#### Scenario: 5 ç§’è¶…æ—¶
- **WHEN** AI API è°ƒç”¨è¶…è¿‡ 5 ç§’æœªå“åº”
- **THEN** ç³»ç»Ÿå–æ¶ˆè¯·æ±‚
- **THEN** ç³»ç»Ÿæ˜¾ç¤º "AI æœåŠ¡å“åº”è¶…æ—¶ï¼Œè¯·ç¨åŽé‡è¯•"

#### Scenario: è¶…æ—¶åŽé‡è¯•
- **WHEN** AI è°ƒç”¨è¶…æ—¶
- **THEN** ç³»ç»Ÿå…è®¸ç”¨æˆ·é‡æ–°è¾“å…¥ç›¸åŒçš„æŒ‡ä»¤

### Requirement: åŠ è½½æç¤º

ç³»ç»Ÿ SHALL åœ¨ AI æ€è€ƒæ—¶æ˜¾ç¤ºåŠ è½½æç¤ºã€‚

#### Scenario: æ˜¾ç¤ºæ€è€ƒåŠ¨ç”»
- **WHEN** AI æ­£åœ¨å¤„ç†ç”¨æˆ·è¾“å…¥
- **THEN** ç³»ç»Ÿæ˜¾ç¤º "ðŸ¤” æ€è€ƒä¸­..." åŠ¨ç”»ï¼ˆå¯é€‰ï¼šä½¿ç”¨ spinnerï¼‰

#### Scenario: æ€è€ƒå®ŒæˆåŽéšè—
- **WHEN** AI å¤„ç†å®Œæˆ
- **THEN** ç³»ç»Ÿéšè—åŠ è½½æç¤ºå¹¶æ˜¾ç¤ºç»“æžœ

### Requirement: å¤šè½®å‚æ•°æ”¶é›†

ç³»ç»Ÿ SHALL æ”¯æŒé€šè¿‡å¯¹è¯æ–¹å¼æ”¶é›†ç¼ºå¤±çš„å¿…éœ€å‚æ•°ã€‚

#### Scenario: é€ä¸ªæ”¶é›†å‚æ•°
- **WHEN** ç”¨æˆ·è¾“å…¥ "åˆ›å»ºæ–‡ç« " ä½†ç¼ºå°‘ topic å‚æ•°
- **THEN** ç³»ç»Ÿæç¤º "ðŸ“ è¯·è¾“å…¥æ–‡ç« ä¸»é¢˜ï¼š"
- **THEN** ç”¨æˆ·è¾“å…¥åŽï¼Œç³»ç»Ÿè¡¥å……å‚æ•°å¹¶ç»§ç»­

#### Scenario: å‚æ•°éªŒè¯
- **WHEN** ç”¨æˆ·æä¾›çš„å‚æ•°ä¸ç¬¦åˆé¢„æœŸæ ¼å¼
- **THEN** ç³»ç»Ÿæç¤º "å‚æ•°æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥ï¼š"

#### Scenario: å–æ¶ˆå‚æ•°æ”¶é›†
- **WHEN** ç”¨æˆ·åœ¨å‚æ•°æ”¶é›†è¿‡ç¨‹ä¸­è¾“å…¥ `cancel` æˆ– `å–æ¶ˆ`
- **THEN** ç³»ç»Ÿè¿”å›žè¾“å…¥æç¤ºï¼Œæ”¾å¼ƒå½“å‰æ“ä½œ
